---
import { Typography } from "..";
import Container from "../molecules/Container.astro";

const { logo } = Astro.props;
---

<nav class="fixed z-5 w-full top-0">
  <div id="nav-div" class="transparent py-12 transition-all duration-300">
    <Container>
      <div class="flex justify-between items-center px-4 md:px-0">
        <!-- logo -->
        <a class="w-20" href="/">
          <img class="w-full" src={logo} alt="wenvel logo" />
        </a>
        <div
          class="navLinks w-full min-h-[20vh] absolute bg-white left-0 top-[-200%] flex items-center pl-8 md:static md:bg-transparent md:justify-end md:min-h-fit transition-all duration-500 z-4"
        >
          <div
            class="w-1/2 flex flex-col items-start gap-8 md:flex-row md:items-center justify-between md:gap-2"
          >
            <a href="">
              <Typography weight="font-bold">Inicio</Typography>
            </a>
            <a href="">
              <Typography weight="font-bold">Invitaciones</Typography>
            </a>
            <a href="">
              <Typography weight="font-bold">Contacto</Typography>
            </a>
            <a href="">
              <Typography weight="font-bold">Blog</Typography>
            </a>
            <i
              id="dark-mode"
              class="fas fa-moon text-font-grey dark:text-slate-300 text-5xl mr-4 text-grey-1 cursor-pointer w-fit"
            ></i>
          </div>
        </div>
        <div class="block md:hidden">
          <i
            id="mobile-menu"
            class="fas fa-bars-staggered text-5xl mr-4 text-grey-1 cursor-pointer w-fit"
          ></i>
        </div>
      </div>
    </Container>
  </div>
</nav>

<script>
  const nav = document.querySelector("#nav-div");
  const darkMode = document.querySelector("#dark-mode");
  const menuButton = document.querySelector("#mobile-menu");
  const navLinks = document.querySelector(".navLinks");

  const body = document.body;

  darkMode.addEventListener("click", () => {
    if (darkMode.classList.contains("fa-moon")) {
      darkMode.classList.replace("fa-moon", "fa-sun");
      localStorage.setItem("theme", "dark");
      body.classList.remove("light");
      body.classList.add("dark");
    } else {
      darkMode.classList.replace("fa-sun", "fa-moon");
      localStorage.setItem("theme", "light");
      body.classList.remove("dark");
      body.classList.add("light");
    }
  });

  menuButton.addEventListener("click", (e) => {
    if (menuButton.classList.contains("fa-bars-staggered")) {
      menuButton.classList.replace("fa-bars-staggered", "fa-xmark");
      navLinks.classList.remove("top-[-200%]");
      navLinks.classList.add("top-[10rem]");
    } else {
      menuButton.classList.replace("fa-xmark", "fa-bars-staggered");
      navLinks.classList.remove("top-[10rem]");
      navLinks.classList.add("top-[-200%]");
    }
  });

  window.addEventListener("scroll", (e) => {
    console.log(window.scrollY);
    if (window.scrollY > 50) {
      nav.classList.add(
        "backdrop-blur-sm",
        "shadow-2xl",
        "shadow-wenvel-red/20",
        "scale-[1.01]",
        "bg-white/80",
        "dark:bg-slate-900/80"
      );
    } else {
      nav.classList.remove(
        "shadow-2xl",
        "shadow-wenvel-red-/20",
        "scale-[1.01]",
        "bg-white/80",
        "dark:bg-slate-900/80"
      );
    }
  });
</script>
